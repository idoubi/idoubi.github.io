<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>修复日志 on 艾逗笔</title>
    <link>https://idoubi.cc/tags/%E4%BF%AE%E5%A4%8D%E6%97%A5%E5%BF%97/</link>
    <description>Recent content in 修复日志 on 艾逗笔</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>© 艾逗笔 2021 All rights reserved.</copyright>
    <lastBuildDate>Wed, 04 Dec 2013 00:05:00 +0000</lastBuildDate><atom:link href="https://idoubi.cc/tags/%E4%BF%AE%E5%A4%8D%E6%97%A5%E5%BF%97/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>院网修复日志</title>
      <link>https://idoubi.cc/legacy/%E9%99%A2%E7%BD%91%E4%BF%AE%E5%A4%8D%E6%97%A5%E5%BF%97/</link>
      <pubDate>Wed, 04 Dec 2013 00:05:00 +0000</pubDate>
      
      <guid>https://idoubi.cc/legacy/%E9%99%A2%E7%BD%91%E4%BF%AE%E5%A4%8D%E6%97%A5%E5%BF%97/</guid>
      <description>2013 年 12 月 2 日
正在上量子力学课，接到黄老师的电话说院网后台登陆不了，让我马上过去修。于是翘课去了院办，检测了很久，发现原来是 session 变量失效的问题，导致登陆参数传递不了，所以后台登不上去，试过很多次方法，修复不了这一问题，却偶然间发现了木马文件，原来是被黑了，院网代码中被植入了百家乐网站的垃圾信息。 删除了几个垃圾文件，还有三个木马始终删不掉，于是去了网络中心找蔡老师帮忙，蔡老师检测了一下 CPU，发现达到了 90%以上，有个叫 w3wp.exe 的文件占用了系统的大部分 CPU，而且手动停止之后又能自动运行。由于 CPU 占用过高，这时候的 IIS 已经跑不起来了，院网自然也访问不了。蔡老师也没找到解决的方法，叫我回院办给服务器装个杀毒软件杀杀毒，于是我就回院办了。当天下午尝试了很多办法解决 IIS 运行的问题，无果。傍晚的时候黄老师叫了樊学长去帮忙修复，樊学长说 w3wp.exe 是 IIS 运行时候的应用程序，不是病毒，但是同时很多个 w3wp.exe 一起运行占用 CPU 达 90%以上很明显不正常。每次重启之后 CPU 会降低到 20%左右，经过十几分钟之后又会自动上升到 90%以上。我们便是趁着 CPU 较低院网能正常访问的时候去修复 session 失效的问题。既然 session 不能正确传递参数，樊学长想到了用 URL 传递 id 参数的办法，来替代 session 保存登陆信息，但是这样做的不便之处是改动量比较大，每一个后台操作页面都需要写一个参数读取的代码，工作量很大。我们两一直改到晚上 10 点才回宿舍。解决的问题只是暂时性的能登陆进后台，但是不能进行文章添加修改删除的操作。IIS 占用 CPU 过高的问题还是没解决。回宿舍后头痛的要死，躺床上就睡了。2 号，翘课一天。说好的学习呵呵了。。。
2013 年 12 月 3 日
上午还在睡觉被黄老师一个电话叫醒，起来买了点吃的匆匆忙忙跑去院办继续修复院网，上午的工程热力学自然翘了。翘课对于我来说已经是家常便饭了。还是 CPU 占用过高和 session 不能传递参数的问题，我说卸掉 IIS，用 php 重新改写院网，黄老师坚持让我修复 IIS，一天之内恢复院网，为此与她大吵了一架。对于一个程序员而言，维护别人的代码比自己重新设计花的时间要多得多，虽然我极力要求重新设计，但还是拗不过领导，只能妥协，又尝试了很多办法解决 IIS 的问题，无果。再一次去网络中心找蔡老师，蔡老师建议换系统，回来跟黄老师汇报，黄老师要求立刻马上换系统，虽然我给十几台电脑换过系统，但只换过 win7、win8 和 XP，院网服务器用的是 windows 2003 server，我不敢贸然尝试，万一出了什么问题那个责任我负担不起。跟黄老师说我不会，得到了一个白眼。黄老师打电话给戴尔客服，被告知院网服务器过了保修期，需要续保他们才会过来修。后来黄老师又联系上了一个以前负责维护院网的学长，他现在已经毕业参加工作了，那学长很热心，通过远程控制的方式帮我们查找问题，弄了几十分钟也没找到解决办法。于是我联系上了泽韬，他是国软的技术大神，现在负责未来网服务器的维护，泽韬一整天都有课，抽不出时间。最终还是在傍晚的时候来帮忙，检测了一遍，得出的结论还是挂马的问题，说要把木马文件检测出来需要对后台文件一个一个进行检测，可能需要花一个礼拜的时间。我们想到一个权宜之计解决 session 变量传递参数的问题，就是限定登陆 id 为某一个特定的值，只有该 id 对应的用户名才能登陆后台进行相关操作，虽然黄老师还是要求把问题彻底解决，但迫于无奈还是妥协了，要求把 id 设置成她的登陆 id，其他人把新闻发给她由她来发。6 点多的时候，泽韬要回信息学部上课，我们便收工了。3 号，又翘课一天，对院网的修复心灰意冷，暗地下决心，只要这次能把院网修复，我特么就辞职不干了，到现在为止还一毛钱工资没给我，我还每天翘课来搞这堆破事，真特么自找罪受。但是院网毕竟是在我任职期间被黑的，不修好就辞职心里过意不去，还是接着修呗。。。</description>
    </item>
    
  </channel>
</rss>
